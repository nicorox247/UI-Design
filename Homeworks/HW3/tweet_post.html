<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Twitter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" 
    rel="stylesheet" crossorigin="anonymous">
    
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>

    <style>
        .textbox {
            border: 2px solid lightgray;
            border-radius: 8px;
            /* background-color: antiquewhite; */
            padding: 10px;
            width: 100%;
            max-width: 400px; /* Allows it to expand but not too much */
            min-height: 50px;  /* Gives it a good default size */
            resize: vertical;   /* Allows user to resize vertically */
            font-size: 16px;    /* Common size for input fields */
        }
        .post {
            background-color: blue;
            color: white;
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            max-width: 400px;
            word-wrap: break-word;
        }
        .btn-disabled {
            background-color: lightgray !important;
            border-color: gray !important;
            color: white !important;
            pointer-events: none;
        }
        .char-count {
            font-size: 14px;
            color: gray;
        }
        .char-count.exceeded {
            color: red;
            font-weight: bold;
        }
    </style>

<script>
    function createPost(message) {
        if (message.trim() === "") return; // Prevent empty posts
        if(message.length > 30 ) return;

        let newPost = $("<div class='post'>").text(message);
        $("#updates").prepend(newPost); // Add new post at the top
        $("#userInput").val(""); // Clear textarea after posting
        $("#charCount").text("0/30");
    }

    function updateCount(){
            let charCount = $("#userInput").val().length;
            $("#charCount").text(charCount + "/30");

            if (charCount > 30 || charCount === 0) {
                $("#charCount").addClass("exceeded");
                $("#post").prop("disabled", true).addClass("btn-disabled").removeClass("btn-primary"); // Disable button if over 30 or empty
            } else {
                $("#charCount").removeClass("exceeded");
                $("#post").prop("disabled", false).removeClass("btn-disabled").addClass("btn-primary"); // Enable button when valid
            }
        }

        $(document).ready(function(){
            $("#userInput").on("input", function() {
                updateCount();
            });

            $("#post").click(function(){
                let userMessage = $("#userInput").val();
                createPost(userMessage);
            });

            // Start with the button disabled
            $("#post").prop("disabled", true).addClass("btn-disabled").removeClass("btn-primary");
        });
        `
</script>
</head>
<body style="background-color: black;">

<div class="container mt-4 p-3" style="background-color: antiquewhite;">
    <div class="row">
        <div class="col-12">
            <label for="userInput" class="form-label">What's on your mind?</label>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <textarea id="userInput" class="textbox form-control" placeholder="Type something..."></textarea>
        </div>
    </div>
    <div class="row mt-2">
        <div class="col-2">
            <div id="charCount" class="char-count">0/30</div>
            <button id="post" class="btn btn-primary">Post Tweet</button>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-12">
            <div id="updates"></div>
        </div>
    </div>
</div>

</body>
</html>`
